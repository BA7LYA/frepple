  <div class="row">
    <div data-ng-class="['widget-list', 'col-12', 'col-lg-' + col['cols'][0].width]" data-ng-repeat="col in preferences['widgets']" data-widget="{{col['name']}}" data-widget-width="{{col['cols'][0].width}}">
      <div data-ng-repeat="widget in col['cols'][0]['widgets']">
        <div class="card widget mb-3" data-widget="{{widget[0]}}" data-ng-if="widget[0] == 'operationplan'" data-widget="operationplan" id="attributes-operationplan" showoperationplan-drv></div>
        <div class="card widget mb-3" data-widget="{{widget[0]}}" data-ng-if="widget[0] == 'inventorygraph'" data-widget="inventorygraph" id="attributes-inventorygraph" data-ng-show="operationplan.id !== -1 && operationplan.inventoryreport != undefined" data="operationplan" showinventorygraph-drv></div>
        <div class="card widget mb-3" data-widget="{{widget[0]}}" data-ng-if="widget[0] == 'inventorydata'" data-widget="inventorydata" id="attributes-inventorydata" data-ng-show="operationplan.id !== -1 && operationplan.inventoryreport != undefined" data="operationplan" showinventorydata-drv></div>
        <div class="card widget mb-3" data-widget="{{widget[0]}}" data-ng-if="widget[0] == 'operationproblems'" data-widget="operationproblems" id="attributes-operationproblems" data-ng-show="operationplan.id !== -1 && operationplan.problems != undefined" data="operationplan" showproblemspanel-drv></div>
        <div class="card widget mb-3" data-widget="{{widget[0]}}" data-ng-if="widget[0] == 'operationresources'" data-widget="operationresources" id="attributes-operationresources" data-ng-show="operationplan.id !== -1 && operationplan.loadplans != undefined" data="operationplan" data-mode="mode" showresourcespanel-drv></div>
        <div class="card widget mb-3" data-widget="{{widget[0]}}" data-ng-if="widget[0] == 'operationflowplans'" data-widget="operationflowplans" id="attributes-operationflowplans" data-ng-show="operationplan.id !== -1 && operationplan.flowplans != undefined" data="operationplan" showbufferspanel-drv></div>
        <div class="card widget mb-3" data-widget="{{widget[0]}}" data-ng-if="widget[0] == 'operationdemandpegging'" data-widget="operationdemandpegging" id="attributes-operationdemandpegging" data-ng-show="operationplan.id !== -1 && operationplan.pegging_demand.length > 0" data="operationplan" showoperationpeggingpanel-drv></div>
        <div class="card widget mb-3" data-widget="{{widget[0]}}" data-ng-if="widget[0] == 'networkstatus'" data-widget="networkstatus" id="attributes-networkstatus" data-ng-show="operationplan.network !== undefined" data="operationplan" shownetworkstatus-drv></div>
        <div class="card widget mb-3" data-widget="{{widget[0]}}" data-ng-if="widget[0] == 'downstreamoperationplans'" data-widget="downstreamoperationplans" id="attributes-downstreamoperationplans" data-ng-show="operationplan.downstreamoperationplans !== undefined" data="operationplan" showdownstreamoperationplans-drv></div>
        <div class="card widget mb-3" data-widget="{{widget[0]}}" data-ng-if="widget[0] == 'upstreamoperationplans'" data-widget="upstreamoperationplans" id="attributes-upstreamoperationplans" data-ng-show="operationplan.upstreamoperationplans !== undefined" data="operationplan" showupstreamoperationplans-drv></div>
        <div class="card widget mb-3" data-widget="{{widget[0]}}" data-ng-if="widget[0] == 'supplyinformation'" data-widget="supplyinformation" id="attributes-supplyinformation" data-ng-show="operationplan.attributes !== undefined" data="operationplan" showsupplyinformation-drv></div>
      </div>
    </div>  
  </div>

  <div id="popup2" class="modal" role="dialog" style="z-index: 10000; overflow-y: visible">
    <div class="modal-dialog" data-ng-style="{'width': (databaseerrormodal) ? '500px' : '300px'}">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title text-capitalize" data-ng-if="!databaseerrormodal && !rowlimiterrormodal" translate>unsaved changes</h5>
          <h5 class="modal-title text-capitalize" data-ng-if="rowlimiterrormodal && rowlimiterrormodal" translate>gantt chart rows limit</h5>
          <h5 class="modal-title text-capitalize" data-ng-if="databaseerrormodal" translate>database transaction failed</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" ng-if="!databaseerrormodal && !rowlimiterrormodal">
          <p translate>Do you want to save your changes first?</p>
        </div>
        <div class="modal-body" ng-if="!databaseerrormodal && rowlimiterrormodal">
          <p translate>The Gantt chart is limited to {{rowlimit}} rows.</p>
          <p translate>Please be patient, the chart may take some time to complete.</p>
        </div>
        <div class="modal-body" ng-if="databaseerrormodal" style="height: 350px; overflow: auto;"></div>
        <div class="modal-footer justify-content-between">
          <input type="submit" id="cancelAbutton" role="button" data-ng-click="modalcallback.resolve('continue'); rowlimiterrormodal = false;" class="btn btn-primary" data-bs-dismiss="modal" value="{{'Continue'|translate }}">
          <input type="submit" id="saveAbutton" role="button" data-ng-if="!databaseerrormodal  && !rowlimiterrormodal" data-ng-click="modalcallback.resolve('save')" class="btn btn-primary" data-bs-dismiss="modal" value="{{'Save'|translate }}">
        </div>
      </div>
    </div>
  </div>

  <script>
    $(function() {
      setTimeout(function () {
        //very simple way to adjust grid width without introducing a new watch in angular controller
        $('#grid').setGridWidth($('#content-main').width());
      }, 50);
    });
  </script>
